{{ define "main" }}
<article>
    <header>
        <h1>{{ .Title }}</h1>
        <div class="article-meta">
            {{ if .Params.author }}
            <span>{{ .Params.author }}</span> |
            {{ end }}
            {{ if .Date }}
            <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
            {{ end }}
            {{ if .Lastmod }}
            {{ if ne .Date .Lastmod }}
            | Updated: <time datetime="{{ .Lastmod.Format "2006-01-02" }}">{{ .Lastmod.Format "January 2, 2006" }}</time>
            {{ end }}
            {{ end }}
        </div>

        {{/* Series navigation if part of a series */}}
        {{ if .Params.series }}
        <div class="series-nav">
            <h4>Part of: {{ index .Params.series 0 }}</h4>
            {{ $series := index .Params.series 0 }}
            {{ $seriesPages := where .Site.RegularPages "Params.series" "intersect" (slice $series) }}
            {{ if gt (len $seriesPages) 1 }}
            <p>Read the full series:</p>
            <ol>
                {{ range $seriesPages.ByParam "series_order" }}
                <li>
                    {{ if eq .Permalink $.Permalink }}
                    <strong>{{ .Title }}</strong> (current)
                    {{ else }}
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                    {{ end }}
                </li>
                {{ end }}
            </ol>
            {{ end }}
        </div>
        {{ end }}
    </header>

    <div class="content">
        {{ .Content }}
    </div>

    {{ if .Params.tags }}
    <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--color-border);">
        <strong>Tags:</strong>
        {{ range .Params.tags }}
        <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" style="margin-right: 15px;">{{ . }}</a>
        {{ end }}
    </div>
    {{ end }}
</article>
{{ end }}
